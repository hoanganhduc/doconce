<!--
Automatically generated HTML file from DocOnce source
(https://github.com/hplgit/doconce/)
-->
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="DocOnce: https://github.com/hplgit/doconce/" />
<meta name="description" content="DocOnce Description">
<meta name="keywords" content="doconce,demos,author email,author institution,table of contents,headlines,section headings,headings,running programs,output from programs,comment lines,tables,lists,itemized lists,lists unordered,lists bullets,enumerated lists,ordered lists,lists ordered,lists enumerated,description lists,keyword lists,lists descriptions,lists keywords,inline tagging,emphasized words,boldface words,inline verbatim text,verbatim text, inline,links,hyperlinks,quotation syntax,quotation,non-breaking space,non-breaking space,nbsp,horizontal rule,m-dash,em-dash,ampersand,footnotes,inline comments,comments, inline,track changes,inline comments for editing,linebreak,citations,inline mathematics,formulas (math),mathematical formulas,cross referencing,labels,references,citations,citations, generalized,generalized citations,cross-document referencing,index,some index entry,main entry subentry,emojis,smileys,exercise environment,problem environment,project environment,example environment,verbatim text, code blocks,code blocks,syntax highlighting,computer code blocks,mathematical equations,equations,LaTeX blocks with math,MS Word,Word (Microsoft),epub,Calibre,LaTeX newcommands,newcommands (LaTeX),macros (LaTeX),algorithms,admonitions,warning admon,notice admon,summary admon,question admon,block admon,admonition layout,HTML admonitions,LaTeX admonitions,box environment,frame (box) environment,equation with frame,bibliography,reference list,Publish (for bibliography),BibTeX,bibliography, database,citations,LaTeX bibliographic styles,preprocessing,splitting documents,multi-page documents,slides,HTML5 slides,LaTeX slides,Markdown slides,slide syntax,Emacs doconce support,doconce syntax highlighting,syntax highlighting for doconce,doconce editing (Emacs),preprocessing,inline comments,notes (visible/invisible),demos,HTML output,output format HTML,HTML syntax highlighting,HTML movies,movies in HTML,HTML layouts,HTML templates,splitting documents,multi-page documents,HTML file collection,blog posts,Wordpress blog,Google blogger,output format Markdown,output format Pandoc,Markdown output,Pandoc output,output format strict Markdown,output format GitHub-flavored Markdown,output format strapdown Markdown,LaTeX output,output format LaTeX,LaTeX style options,LaTeX syntax highlighting,output format XeLaTeX,XeLaTeX output,ePub output,output format ePub,output format MS Word,output format LibreOffice,output format OpenOffice,output format notebook,IPython notebook,notebook,output format ASCII,output format plain untagged text,ASCII output,plain untagged text output,output format reStructuredText,reStructuredText output,output format Sphinx,Sphinx output,Sphinx styles,Sphinx directory,output format MediaWiki,output format Creole wiki,output format Google wiki,MediaWiki output,Google wiki output,Creole wiki output,wiki output,Google docs output,tweaking output,automatic editing,command-line options doconce format,installation">

<title>DocOnce Description</title>

<!-- Bootstrap style: bootswatch_readable -->
<link href="http://netdna.bootstrapcdn.com/bootswatch/3.1.1/readable/bootstrap.min.css" rel="stylesheet">
<!-- not necessary
<link href="http://netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css" rel="stylesheet">
-->

<style type="text/css">

/*
in.collapse+a.btn.showdetails:before { content:'Hide details'; }
.collapse+a.btn.showdetails:before { content:'Show details'; }
*/
</style>




</head>

<!-- tocinfo
{'highest level': 1,
 'sections': [('What Is DocOnce?', 1, 'what:is:doconce', 'what:is:doconce'),
              ('Demos', 2, None, '___sec1'),
              ('Markup Based on Special Lines', 1, None, '___sec2'),
              ('Heading with title and author(s)', 2, None, '___sec3'),
              ('Table of contents', 2, None, '___sec4'),
              ('Section headings', 2, None, '___sec5'),
              ('Figures', 2, None, '___sec6'),
              ('Sidecaption in LaTeX and HTML', 3, None, '___sec7'),
              ('Plot Files in LaTeX', 3, None, '___sec8'),
              ('Movies', 2, None, '___sec9'),
              ('The Basic Command', 3, None, '___sec10'),
              ('MP4, WebM, and Ogg Movies in HTML', 3, None, '___sec11'),
              ('Movie Handling in Various Formats', 3, None, '___sec12'),
              ('YouTube and Vimeo Movies', 3, None, '___sec13'),
              ('Animation Based on Filename Generators', 3, None, '___sec14'),
              ('Copying Computer Code from Source Files',
               2,
               None,
               '___sec15'),
              ('Inserting the Output from Operating System Commands',
               2,
               None,
               '___sec16'),
              ('Comments', 2, None, '___sec17'),
              ('Tables', 2, None, '___sec18'),
              ('Basic Syntax', 3, None, '___sec19'),
              ('Tables to/from CSV Data Files', 3, None, '___sec20'),
              ('Lists', 2, None, '___sec21'),
              ('Inline Tagging', 1, 'inline:tagging', 'inline:tagging'),
              ('Emphasized Words', 2, None, '___sec23'),
              ('Inline Verbatim Text', 2, None, '___sec24'),
              ('Links to Web Addresses', 2, None, '___sec25'),
              ('Links to Mail Addresses', 2, None, '___sec26'),
              ('Links to Local Files', 2, None, '___sec27'),
              ('Quotes', 2, None, '___sec28'),
              ('Non-Breaking Space', 2, None, '___sec29'),
              ('Horizontal rule', 2, None, '___sec30'),
              ('Em-dash', 2, None, '___sec31'),
              ('Ampersand', 2, None, '___sec32'),
              ('Footnotes', 2, None, '___sec33'),
              ('Inline Comments', 2, None, '___sec34'),
              ('Inline Comments for Editing', 2, None, '___sec35'),
              ('Forced Line Breaks', 2, None, '___sec36'),
              ('Inline Mathematics', 2, None, '___sec37'),
              ('Cross-Referencing', 2, None, '___sec38'),
              ('Generalized Cross-Referencing',
               2,
               'manual:genrefs',
               'manual:genrefs'),
              ('Generalized References', 3, None, '___sec40'),
              ('Generalized References to Chapters', 3, None, '___sec41'),
              ('Tool for Generating Generalizedd References',
               3,
               None,
               '___sec42'),
              ('A Worked Example', 3, None, '___sec43'),
              ('Index', 2, None, '___sec44'),
              ('Emojis', 2, None, '___sec45'),
              ('Exercises, Problems, Projects, and Examples',
               1,
               None,
               '___sec46'),
              ('Examples on Exercise Syntax', 2, None, '___sec47'),
              ('Typesetting of Exercises', 2, None, '___sec48'),
              ('Remark on Typesettng of Examples', 3, None, '___sec49'),
              ('List of Exercises, Problems, and Projects',
               2,
               None,
               '___sec50'),
              ('Extracting All Exercises in a Separate Document',
               2,
               None,
               '___sec51'),
              ('Extracting All Exercises as Stand-Alone Documents',
               2,
               'exercises:standalone',
               'exercises:standalone'),
              ('Example on an Exercise', 2, None, '___sec53'),
              ('Exercise 1: Compute integrals',
               2,
               'doconce:manual:exercise:ex',
               'doconce:manual:exercise:ex'),
              ('Remarks', 3, None, '___sec55'),
              ('Other Environments', 1, None, '___sec56'),
              ('Blocks of Verbatim Computer Code',
               2,
               'sec:verbatim:blocks',
               'sec:verbatim:blocks'),
              ('Typesetting Styles', 3, None, '___sec58'),
              ('Copying Code from Source Files', 3, None, '___sec59'),
              ('The `fromto` and `from-to` directives', 3, None, '___sec60'),
              ('LaTeX Blocks of Mathematical Text',
               2,
               'mathtext',
               'mathtext'),
              ('Support of LaTeX Math in Various Output Formats',
               3,
               None,
               '___sec62'),
              ('ePub', 3, None, '___sec63'),
              ('Apple iBook Format', 3, None, '___sec64'),
              ('Dealing with Mathematics in Formats without LaTeX Math Support',
               3,
               None,
               '___sec65'),
              ('Mathematics for PowerPoint/OpenOffice', 3, None, '___sec66'),
              ('Macros (Newcommands)', 2, 'newcommands', 'newcommands'),
              ('Writing Guidelines (Especially for LaTeX Users!)',
               2,
               'manual:latex:guide',
               'manual:latex:guide'),
              ('Typesetting of Algorithms', 2, None, '___sec69'),
              ('Admonitions', 2, None, '___sec70'),
              ('Examples on Admonition Types', 3, None, '___sec71'),
              ('Layout of admonitions in HTML', 3, None, '___sec72'),
              ('Layout of admonitions in LaTeX', 3, None, '___sec73'),
              ('LaTeX code environments inside admonitions',
               3,
               None,
               '___sec74'),
              ('The Box Environment', 3, None, '___sec75'),
              ('User-Defined Environments',
               2,
               'manual:userdef:envir',
               'manual:userdef:envir'),
              ('Example 1: Addition', 2, 'ex:math:1p1', 'ex:math:1p1'),
              ('Bibliography (References)', 1, None, '___sec78'),
              ('Importing your data to the Publish database',
               2,
               None,
               '___sec79'),
              ('Requirements to input data', 2, None, '___sec80'),
              ('Adding new references to the database', 2, None, '___sec81'),
              ('Exporting the database', 2, None, '___sec82'),
              ('Referring to publications', 2, None, '___sec83'),
              ('Specifying the Publish database', 2, None, '___sec84'),
              ('LaTeX Bibliography Style', 2, None, '___sec85'),
              ('Preprocessing and Postprocessing', 1, None, '___sec86'),
              ('The Preprocess and Mako Preprocessors', 2, None, '___sec87'),
              ('Splitting Documents into Smaller Pieces',
               2,
               None,
               '___sec88'),
              ('Writing Slides', 1, None, '___sec89'),
              ('Overview', 2, None, '___sec90'),
              ('Slide Types', 3, None, '___sec91'),
              ('Syntax', 3, None, '___sec92'),
              ('Slide Elements', 2, None, '___sec93'),
              ('Title page', 3, None, '___sec94'),
              ('Parts Page', 3, None, '___sec95'),
              ('Standard bullet list page', 3, None, '___sec96'),
              ('Equations, movies, figures', 3, None, '___sec97'),
              ('HTML5 Slides', 2, None, '___sec98'),
              ('Potential Problems', 3, None, '___sec99'),
              ('LaTeX Beamer Slides', 2, None, '___sec100'),
              ('Themes', 3, None, '___sec101'),
              ('Pop of list items and blocks', 3, None, '___sec102'),
              ('Compilation', 3, None, '___sec103'),
              ('Misc', 1, None, '___sec104'),
              ('Missing Features', 2, None, '___sec105'),
              ('Emacs DocOnce Formatter',
               2,
               'emacs:doconce',
               'emacs:doconce'),
              ('Mako Programming', 1, 'manual:mako', 'manual:mako'),
              ('The Basics of Mako', 2, None, '___sec108'),
              ('Debugging Python code in Mako',
               2,
               'mako:py:debugging',
               'mako:py:debugging'),
              ('Example: Nomenclature functionality',
               2,
               'manual:mako:nomenclature',
               'manual:mako:nomenclature'),
              ('Example: Executing Python and using SymPy Objects in LaTeX',
               2,
               None,
               '___sec111'),
              ('Example: Extending Tables to Handle Figures',
               2,
               'manual:tables:wfigs',
               'manual:tables:wfigs'),
              ('Solution for LaTeX and HTML', 3, None, '___sec113'),
              ('Generating the Entire Table', 3, None, '___sec114'),
              ('Generating the Entire Table in a Native Format via Mako',
               3,
               None,
               '___sec115'),
              ('Generating the Entire Table in a Native Format as a Post Process',
               3,
               None,
               '___sec116'),
              ('Example: Defining a Theorem Environment',
               2,
               'manual:theorem:envir',
               'manual:theorem:envir'),
              ('Tools for Writing DocOnce Documents', 2, None, '___sec118'),
              ('Debugging', 2, None, '___sec119'),
              ('From DocOnce to Other Formats',
               1,
               'doconce2formats',
               'doconce2formats'),
              ('Generating a makefile', 2, 'do2any:make', 'do2any:make'),
              ('Preprocessing', 2, 'do2any:pre', 'do2any:pre'),
              ('Removal of inline comments',
               2,
               'do2any:inlinecomments',
               'do2any:inlinecomments'),
              ('Notes', 2, 'do2any:notes', 'do2any:notes'),
              ('Demo of different formats', 2, None, '___sec125'),
              ('Useful Options for `doconce format`', 2, None, '___sec126'),
              ('HTML', 2, 'do2any:html', 'do2any:html'),
              ('Basics', 3, None, '___sec128'),
              ('Typesetting of Code', 3, None, '___sec129'),
              ('Handling of Movies', 3, None, '___sec130'),
              ('HTML Styles', 3, None, '___sec131'),
              ('HTML templates', 3, None, '___sec132'),
              ('Splitting HTML documents', 3, None, '___sec133'),
              ('The HTML File Collection', 3, None, '___sec134'),
              ('Filenames', 3, None, '___sec135'),
              ('URL to files hosted on GitHub', 3, None, '___sec136'),
              ('Other HTML options', 3, None, '___sec137'),
              ('Blog Posts', 2, 'do2any:blog', 'do2any:blog'),
              ('Pandoc and Markdown', 2, 'do2any:pandoc', 'do2any:pandoc'),
              ('Markdown to HTML conversion', 3, None, '___sec140'),
              ('Strict Markdown', 3, None, '___sec141'),
              ('GitHub-flavored Markdown', 3, None, '___sec142'),
              ('MultiMarkdown', 3, None, '___sec143'),
              ('Strapdown rendering of Markdown text', 3, None, '___sec144'),
              ('Using Pandoc to go from LaTeX to MS Word or HTML',
               3,
               None,
               '___sec145'),
              ('LaTeX: Overview', 2, 'do2any:latex', 'do2any:latex'),
              ('The old `ptex2tex` step', 2, None, '___sec147'),
              ('From DocOnce to LaTeX-PDF: Generate LaTeX (Step 1)',
               2,
               'do2any:latex:compile1',
               'do2any:latex:compile1'),
              ('From DocOnce to LaTeX-PDF: Edit the LaTeX File (Step 2, Optional)',
               2,
               'do2any:latex:compile2',
               'do2any:latex:compile2'),
              ('From DocOnce to LaTeX-PDF: Generate PDF (Step 3)',
               2,
               'do2any:latex:compile3',
               'do2any:latex:compile3'),
              ('XeLaTeX', 2, 'do2any:xelatex', 'do2any:xelatex'),
              ('From PDF to e-book formats', 2, 'do2any:epub', 'do2any:epub'),
              ('Microsoft Word or LibreOffice',
               2,
               'do2any:MS:ooffice',
               'do2any:MS:ooffice'),
              ('Jupyter (IPython) Notebooks',
               2,
               'do2any:ipynb',
               'do2any:ipynb'),
              ('Hidden code blocks', 3, None, '___sec155'),
              ('Displaying code as plain text instead of executable cells',
               3,
               None,
               '___sec156'),
              ('Figures', 3, None, '___sec157'),
              ('Movies', 3, None, '___sec158'),
              ('Admonitions', 3, None, '___sec159'),
              ('Plain ASCII Text', 2, 'do2any:ascii', 'do2any:ascii'),
              ('reStructuredText', 2, 'do2any:rst', 'do2any:rst'),
              ('Sphinx', 2, 'do2any:sphinx', 'do2any:sphinx'),
              ('The manual Sphinx procedure', 3, None, '___sec163'),
              ('Wiki Formats', 2, 'do2any:wiki', 'do2any:wiki'),
              ('Google Docs', 2, 'do2any:google:docs', 'do2any:google:docs'),
              ('Tweaking the DocOnce Output',
               2,
               'do2any:tweaking',
               'do2any:tweaking'),
              ('Options for the `doconce` commands', 1, None, '___sec167'),
              ('`doconce format` command-line options', 2, None, '___sec168'),
              ('Installation of DocOnce and its Dependencies',
               1,
               'install:doconce',
               'install:doconce'),
              ('DocOnce', 2, None, '___sec170'),
              ('Dependencies', 2, None, '___sec171'),
              ('Python v2.7', 3, None, '___sec172'),
              ('Preprocessors', 3, None, '___sec173'),
              ('Bibliography', 3, None, '___sec174'),
              ('Image file handling', 3, None, '___sec175'),
              ('Spellcheck', 3, None, '___sec176'),
              ('Ptex2tex for LaTeX Output', 3, None, '___sec177'),
              ('Pygments and the Minted Code Style', 3, None, '___sec178'),
              ('LaTeX packages', 3, None, '___sec179'),
              ('Sphinx or reStructuredText Output', 3, None, '___sec180'),
              ('Markdown and Pandoc Output', 3, None, '___sec181'),
              ('Epydoc Output', 3, None, '___sec182'),
              ('Analyzing file differences', 3, None, '___sec183'),
              ('Basic Parsing Ideas', 1, None, '___sec184'),
              ('Typesetting of Function Arguments, Return Values, and Variables',
               2,
               None,
               '___sec185'),
              ('References', 1, None, '___sec186')]}
end of tocinfo -->

<body>



<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  TeX: {
     equationNumbers: {  autoNumber: "none"  },
     extensions: ["AMSmath.js", "AMSsymbols.js", "autobold.js", "color.js"]
  }
});
</script>
<script type="text/javascript" async
 src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>

<!-- newcommands_replace.tex -->
$$
\newcommand{\beqa}{\begin{eqnarray}}
\newcommand{\eeqa}{\end{eqnarray}}
\newcommand{\ep}{\thinspace . }
\newcommand{\uvec}{\vec u}
\newcommand{\Q}{\pmb{Q}}
$$




    
<!-- Bootstrap navigation bar -->
<div class="navbar navbar-default navbar-fixed-top">
  <div class="navbar-header">
    <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-responsive-collapse">
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
    </button>
    <a class="navbar-brand" href="manual.html">DocOnce Description</a>
  </div>
  <div class="navbar-collapse collapse navbar-responsive-collapse">
    <ul class="nav navbar-nav navbar-right">
      <li class="dropdown">
        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Contents <b class="caret"></b></a>
        <ul class="dropdown-menu">
     <!-- navigation toc: --> <li><a href="._manual000.html#what:is:doconce" style="font-size: 80%;">What Is DocOnce?</a></li>
     <!-- navigation toc: --> <li><a href="._manual003.html#___sec2" style="font-size: 80%;">Markup Based on Special Lines</a></li>
     <!-- navigation toc: --> <li><a href="._manual010.html#inline:tagging" style="font-size: 80%;">Inline Tagging</a></li>
     <!-- navigation toc: --> <li><a href="._manual013.html#___sec46" style="font-size: 80%;">Exercises, Problems, Projects, and Examples</a></li>
     <!-- navigation toc: --> <li><a href="._manual014.html#___sec56" style="font-size: 80%;">Other Environments</a></li>
     <!-- navigation toc: --> <li><a href="._manual017.html#___sec78" style="font-size: 80%;">Bibliography (References)</a></li>
     <!-- navigation toc: --> <li><a href="._manual018.html#___sec86" style="font-size: 80%;">Preprocessing and Postprocessing</a></li>
     <!-- navigation toc: --> <li><a href="._manual020.html#___sec89" style="font-size: 80%;">Writing Slides</a></li>
     <!-- navigation toc: --> <li><a href="._manual022.html#___sec104" style="font-size: 80%;">Misc</a></li>
     <!-- navigation toc: --> <li><a href="._manual023.html#manual:mako" style="font-size: 80%;">Mako Programming</a></li>
     <!-- navigation toc: --> <li><a href="._manual028.html#doconce2formats" style="font-size: 80%;">From DocOnce to Other Formats</a></li>
     <!-- navigation toc: --> <li><a href="._manual028.html#___sec167" style="font-size: 80%;">Options for the <code>doconce</code> commands</a></li>
     <!-- navigation toc: --> <li><a href="._manual029.html#install:doconce" style="font-size: 80%;">Installation of DocOnce and its Dependencies</a></li>
     <!-- navigation toc: --> <li><a href="._manual029.html#___sec184" style="font-size: 80%;">Basic Parsing Ideas</a></li>
     <!-- navigation toc: --> <li><a href="._manual029.html#___sec186" style="font-size: 80%;">References</a></li>

        </ul>
      </li>
    </ul>
  </div>
</div>
</div> <!-- end of navigation bar -->

<div class="container">

<p>&nbsp;</p><p>&nbsp;</p><p>&nbsp;</p> <!-- add vertical space -->

<a name="part0016"></a>
<!-- !split -->

<h2 id="newcommands">Macros (Newcommands)</h2>

<p>
DocOnce supports a type of macros via a LaTeX-style <em>newcommand</em>
construction, but only inside mathematical expressions (inline
LaTeX math or LaTeX math blocks). Newcommands are not allowed
in the running text. Here is an example:

<p>

<!-- code=latex (!bc latexpro) typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span style="color: #008000; font-weight: bold">\newcommand</span><span style="color: #008000">{</span><span style="color: #008000; font-weight: bold">\beqa</span><span style="color: #008000">}{</span><span style="color: #008000; font-weight: bold">\begin</span><span style="color: #008000">{</span>eqnarray<span style="color: #008000">}}</span>
<span style="color: #008000; font-weight: bold">\newcommand</span><span style="color: #008000">{</span><span style="color: #008000; font-weight: bold">\eeqa</span><span style="color: #008000">}{</span><span style="color: #008000; font-weight: bold">\end</span><span style="color: #008000">{</span>eqnarray<span style="color: #008000">}}</span>
<span style="color: #008000; font-weight: bold">\newcommand</span><span style="color: #008000">{</span><span style="color: #008000; font-weight: bold">\ep</span><span style="color: #008000">}{</span><span style="color: #008000; font-weight: bold">\thinspace</span> . <span style="color: #008000">}</span>
<span style="color: #008000; font-weight: bold">\newcommand</span><span style="color: #008000">{</span><span style="color: #008000; font-weight: bold">\uvec</span><span style="color: #008000">}{</span><span style="color: #008000; font-weight: bold">\vec</span> u<span style="color: #008000">}</span>
<span style="color: #008000; font-weight: bold">\newcommand</span><span style="color: #008000">{</span><span style="color: #008000; font-weight: bold">\Q</span><span style="color: #008000">}{</span><span style="color: #008000; font-weight: bold">\pmb</span><span style="color: #008000">{</span>Q<span style="color: #008000">}}</span>
</pre></div>
<p>
<div class="alert alert-block alert-success alert-text-normal"><b>Notice.</b>
If you desire a newcommand for the running text, using a Mako function
(written in plain Python) is much more flexible. See
the section <a href="._manual023.html#manual:mako">Mako Programming</a>.
</div>


<p>
The newcommands must be defined by the standard LaTeX command
<code>newcommand{name}{definition}</code> in a separate file with name
<code>newcommands*.tex</code>. Use of <code>\def</code> is ignored. Each newcommand
definition <em>must</em> appear on a single line.

<p>
Newcommands in a file with name
<code>newcommand_replace.tex</code> are expanded when DocOnce is translated to
other formats, except for LaTeX (since LaTeX performs the expansion
itself).  Newcommands in files with names <code>newcommands.tex</code> and
<code>newcommands_keep.tex</code> are kept unaltered when DocOnce text is
translated to other formats, except for the Sphinx format. (Since Sphinx
understands LaTeX math, but not newcommands if the Sphinx output is
HTML, it makes most sense to expand all newcommands.)  Normally, a user
will put all newcommands that appear in math blocks surrounded by
<code>!bt</code> and <code>!et</code> in <code>newcommands_keep.tex</code> to keep them unchanged, at
least if they contribute to make the raw LaTeX math text easier to
read in the formats that cannot render LaTeX.

<h2 id="manual:latex:guide">Writing Guidelines (Especially for LaTeX Users!)</h2>

<p>
LaTeX writers often have their own writing habits with use of their
own favorite LaTeX packages. DocOnce is a much simpler format and
corresponds to writing in quite plain LaTeX.
Any LaTeX syntax is accepted when DocOnce translates the text to
LaTeX, but if output in the <code>sphinx</code>, <code>pandoc</code>, <code>mwiki</code>, <code>html</code>, or
<code>ipynb</code> formats is also important, one should follow the rules below.

<ul>
 <li> AMS LaTeX mathematics is supported, also for the <code>html</code>, <code>sphinx</code>,
   and <code>ipynb</code> formats.</li>
 <li> Only five equation environments can be used: <code>\[ ... \]</code>,
   <code>equation*</code>, <code>equation</code>, <code>align*</code>, and <code>align</code>.
   (DocOnce performs extensions to <code>sphinx</code>, <code>ipynb</code>,
   and other formats such that
   labels in <code>align</code> environments work well.)
   This may feel restrictive to LaTeX writers who are used to
   <code>split</code>, <code>aligned</code>, <code>alignat</code>, and other environments (rewrite to
   <code>align</code> and use a number for each equation, or use <code>\nonumber\\</code>
   to end intermediate calculations on multiple lines and use a label
   in the last, final result).</li>
 <li> Do not use comments inside equations.</li>
 <li> Newcommands in mathematical formulas are allowed, but not in
   the running text. Newcommands must be defined in files with names
   <code>newcommands*.tex</code>. Use <code>\newcommands</code> and not <code>\def</code>.
   Each newcommand must be defined on a single line.
   Use Mako functions if you need macros in the running text.</li>
 <li> Use labels and refer to them
   for sections, figures, movies, and equations only.
   MediaWiki (<code>mwiki</code>) does not support references to equations.</li>
 <li> Spaces are not allowed in labels.</li>
 <li> Only figures and movies are floating elements in DocOnce, all other elements
   (code, tables, algorithms) must appear <em>inline</em> without numbers or labels
   for reference <button type="button" class="btn btn-primary btn-xs" rel="tooltip" data-placement="top" title="There is an exception: by using user-defined environments within !bu-name and !eu-name directives, it is possible to label any type of text and refer to it. For example, one can have environments for examples, tables, code snippets, theorems, lemmas, etc. One can also use Mako functions to implement enviroments."><a href="#def_footnote_3" id="link_footnote_3" style="color: white">3</a></button> (refer to inline elements by a section label).
   The reason is that floating elements are in general
   not used in web documents, but we made an exception with figures
   and movies.</li>
 <li> Keep figure captions shorts as they are used as references in the
   Sphinx format. Avoid inline mathematics since Sphinx will strip it
   away in the figure reference.
   (Many writing styles encourage rich captions that
   explains everything about the figure, but this will work well
   only in the HTML and LaTeX formats.)</li>
 <li> You cannot use <code>subfigure</code> to combine several image files in one
   figure, but you can combine the files to one file using
   the <code>doconce combine_images</code> tool. Refer to individual image files
   in the caption or text by (e.g.) &quot;left&quot; and &quot;right&quot;, or
   &quot;upper left&quot;, &quot;lower right&quot;, etc.</li>
 <li> Use plain <code>cite</code> for references (e.g., <code>\citeauthor</code> has no counterpart
   in DocOnce). The bibliography must be prepared in the Publish format,
   but import from (clean) BibTeX is possible.</li>
 <li> Use <code>idx</code> for index entries, but put the definitions between paragraphs,
   not inside them (required by Sphinx).</li>
 <li> Use the <code>bm</code> package and the <code>\bm</code> command for boldface in mathematics.</li>
 <li> Make sure all ordinary text starts in column 1 on each line. Equations
   can be indented. The <code>\begin{}</code> and <code>\end{}</code> directives should start
   in column 1.</li>
 <li> If you depend on various LaTeX environments for your writings, you have
   to give up these, or implement <em>user-defined environments</em> in DocOnce.
   For instance, examples are normally typeset as subsections in DocOnce.
   Learn about the exercise support in DocOnce to typeset exercises, problems,
   and projects.</li>
 <li> Learn about the preprocessors Preprocess and Mako - these are smart
   tools for, e.g., commenting out/in large portions of text and creating
   macros.</li>
 <li> Use <em>generalized referenes</em> with for referring to companion documents
   that may later be put together in a book.</li>
 <li> Follow <a href="https://github.com/hplgit/setup4book-doconce" target="_self">recommendations for DocOnce books</a> if you plan to write a book.</li>
</ul>

<p id="def_footnote_3"><a href="#link_footnote_3"><b>3:</b></a> There is an exception: by using <em>user-defined environments</em>
within <code>!bu-name</code> and <code>!eu-name</code> directives, it is possible to
label any type of text and refer to it. For example, one can have
environments for examples, tables, code snippets, theorems, lemmas, etc.
One can also use Mako functions to implement enviroments.</p>

<p>
<div class="alert alert-block alert-success alert-text-normal"><b>Use the preprocessor to tailor output.</b>
If you really need special LaTeX constructs in the LaTeX output
from DocOnce, you may use use preprocessor if-tests on
the format (typically <code>#if FORMAT in (&quot;latex&quot;, &quot;pdflatex&quot;)</code>) to
include such special LaTeX code. With an else clause you can easily
create corresponding constructions for other formats. This way
of using Preprocess or Mako
allows advanced LaTeX features, or HTML features for the HTML formats,
and thereby fine tuning of the resulting
document. More tuning can be done by automatic editing of the
output file (e.g., <code>.tex</code> or <code>.html</code>) produced by DocOnce using
your own scripts or the <code>doconce replace</code> and <code>doconce subst</code> commands.
</div>


<p>
<div class="alert alert-block alert-success alert-text-normal"><b>Autotranslation of LaTeX to DocOnce?</b>
The tool <code>doconce latex2doconce</code> may help you translating LaTeX files
to DocOnce syntax. However, if you use computer code in floating
list environments, special packages for typesetting algorithms,
example environments, <code>subfigure</code> in figures,
or a lot of newcommands in the running text, there will be need for
a lot of manual edits and adjustments.

<p>
For examples, figure environments
can be translated by <code>doconce latex2doconce</code> only if the label is inside
the caption and the figure is typeset like

<p>

<!-- code=latex (!bc latexcod) typeset with pygments style "default" -->
<div class="highlight" style="background: #ffffff"><pre style="line-height: 125%"><span style="color: #008000; font-weight: bold">\begin</span><span style="color: #008000">{</span>figure<span style="color: #008000">}</span>
  <span style="color: #008000; font-weight: bold">\centering</span>
  <span style="color: #008000; font-weight: bold">\includegraphics</span><span style="color: #7D9029">[width=0.55\linewidth]</span><span style="color: #008000">{</span>figs/myfig.pdf<span style="color: #008000">}</span>
  <span style="color: #008000; font-weight: bold">\caption</span><span style="color: #008000">{</span>This is a figure. <span style="color: #008000; font-weight: bold">\labe</span><span style="color: #008000">{</span>myfig<span style="color: #008000">}}</span>
<span style="color: #008000; font-weight: bold">\end</span><span style="color: #008000">{</span>figure<span style="color: #008000">}</span>
</pre></div>
<p>
If the LaTeX is consistent with respect to placement of
the label, a simple script can autoedit the label inside the caption,
but many LaTeX writers put the label at different places in different
figures, and then it becomes more difficult to autoedit figures and
translate them to the DocOnce <code>FIGURE:</code> syntax.

<p>
Tables are hard to interpret and translate, because the headings and
caption can be typeset in many different ways. The type of table
that is recognized looks like

<p>

<!-- code=latex (!bc latexcod) typeset with pygments style "default" -->
<div class="highlight" style="background: #ffffff"><pre style="line-height: 125%"><span style="color: #008000; font-weight: bold">\begin</span><span style="color: #008000">{</span>table<span style="color: #008000">}</span>
<span style="color: #008000; font-weight: bold">\caption</span><span style="color: #008000">{</span>Here goes the caption.<span style="color: #008000">}</span>
<span style="color: #008000; font-weight: bold">\begin</span><span style="color: #008000">{</span>tabular<span style="color: #008000">}{</span>lr<span style="color: #008000">}</span>
<span style="color: #008000; font-weight: bold">\hline</span>
<span style="color: #008000; font-weight: bold">\multicolumn</span><span style="color: #008000">{</span>1<span style="color: #008000">}{</span>c<span style="color: #008000">}{</span><span style="color: #BA2121">$</span><span style="color: #008000">v_</span><span style="color: #666666">0</span><span style="color: #BA2121">$</span><span style="color: #008000">}</span> <span style="color: #008000">&amp;</span> <span style="color: #008000; font-weight: bold">\multicolumn</span><span style="color: #008000">{</span>1<span style="color: #008000">}{</span>c<span style="color: #008000">}{</span><span style="color: #BA2121">$</span><span style="color: #008000">f_R</span><span style="color: #666666">(</span><span style="color: #008000">v_</span><span style="color: #666666">0)</span><span style="color: #BA2121">$</span><span style="color: #008000">}</span><span style="color: #008000; font-weight: bold">\\</span>
<span style="color: #008000; font-weight: bold">\hline</span>
1.2 <span style="color: #008000">&amp;</span> 4.2<span style="color: #008000; font-weight: bold">\\</span>
1.1 <span style="color: #008000">&amp;</span> 4.0<span style="color: #008000; font-weight: bold">\\</span>
0.9 <span style="color: #008000">&amp;</span> 3.7
<span style="color: #008000; font-weight: bold">\hline</span>
<span style="color: #008000; font-weight: bold">\end</span><span style="color: #008000">{</span>tabular<span style="color: #008000">}</span>
<span style="color: #008000; font-weight: bold">\end</span><span style="color: #008000">{</span>table<span style="color: #008000">}</span>
</pre></div>
<p>
Recall that table captions do not make sense in DocOnce since tables
must be inlined and explained in the surrounding text.

<p>
Footnotes are also problematic for <code>doconce latex2doconce</code> since DocOnce
footnotes must have the explanation outside the paragraph where the
footnote is used. This calls for manual work. The translator from
LaTeX to DocOnce will insert <code>_PROBLEM_</code> and mark footnotes. One
solution is to avoid footnotes in the LaTeX document if fully automatic
translation is desired.
</div>


<h2 id="___sec69">Typesetting of Algorithms </h2>

<p>
DocOnce has no support for typesetting of algorithms, while LaTeX
has quite sophisticated support. LaTeX writes need some strategy with
dealing with algorithms in DocOnce: they should be sophisticated
when the output is in LaTeX and they should be readable when the
output is in other formats that have no native support for
algorithms.

<p>
The simplest solution is to use the preprocessor (Preprocess or Mako)
to allow different solutions for different formats.
There are basically three typesetting styles available: LaTeX
algorithm environments, pseudo code in a verbatim block, and
a nested list. A preprocessor variable, say <code>ALG</code> can be used
to select the typesetting. With Mako we can write

<p>

<!-- code=doconce (!bc do) typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%">% if ALG == &#39;latex&#39;:
<span style="color: #408080; font-style: italic"># Write native LaTeX code for the algorithm</span>
% elif ALG == &#39;code&#39;:
<span style="color: #408080; font-style: italic"># Write pseudo code in (e.g.) a python-like style</span>
!bc pycode
if feature in element:
...
!ec
% elif ALG == &#39;list&#39;:
<span style="color: #408080; font-style: italic"># Use lists to express the algorithm</span>
  o if this element has the feature:
    * ...
% endif
</pre></div>
<p>
<p>
<!-- navigation buttons at the bottom of the page -->
<ul class="pager">
  <li class="previous">
    <a href="._manual015.html">&larr; Prev</a>
  </li>
  <li class="next">
    <a href="._manual017.html">Next &rarr;</a>
  </li>
</ul>
<!-- ------------------- end of main content --------------- -->

</div>  <!-- end container -->
<!-- include javascript, jQuery *first* -->
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
<script src="http://netdna.bootstrapcdn.com/bootstrap/3.0.0/js/bootstrap.min.js"></script>

<!-- Bootstrap footer
<footer>
<a href="http://..."><img width="250" align=right src="http://..."></a>
</footer>
-->


</body>
</html>
    
